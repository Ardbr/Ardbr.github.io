<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo-butterfly 魔改记录3——导航栏部分</title>
      <link href="/2024/11/19/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%953%E2%80%94%E2%80%94%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%83%A8%E5%88%86/"/>
      <url>/2024/11/19/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%953%E2%80%94%E2%80%94%E5%AF%BC%E8%88%AA%E6%A0%8F%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>这一部分比较多，主要是因为我自己引入了一个音乐播放器的部分。</p><h2 id="导航栏-nav-布局修改"><a href="#导航栏-nav-布局修改" class="headerlink" title="导航栏 nav 布局修改"></a>导航栏 <code>nav</code> 布局修改</h2><h3 id="搜索按钮置于右上角"><a href="#搜索按钮置于右上角" class="headerlink" title="搜索按钮置于右上角"></a>搜索按钮置于右上角</h3><p>&emsp;&emsp;找到 <code>layout/includes/nav.pug</code>，让搜索按钮位于最后面，只需要将 <code>theme.menu</code> 和 <code>theme.search</code> 两段代码交换位置即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#menus</span><br><span class="line">if theme.menu</span><br><span class="line">    != partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"></span><br><span class="line">    #toggle-menu</span><br><span class="line">    span.site-page</span><br><span class="line">    i.fas.fa-bars.fa-fw</span><br><span class="line">    </span><br><span class="line">if theme.search.use</span><br><span class="line">    #search-button</span><br><span class="line">    span.site-page.social-icon.search</span><br><span class="line">        i.fas.fa-search.fa-fw</span><br><span class="line">        span= &#x27; &#x27; + _p(&#x27;search.title&#x27;)</span><br></pre></td></tr></table></figure><h3 id="菜单栏居中"><a href="#菜单栏居中" class="headerlink" title="菜单栏居中"></a>菜单栏居中</h3><p>&emsp;&emsp;修改导航栏显示菜单居中，样式相关，找到 <code>css/_layout/head.styl</code>，修改 <code>menus_item</code> 样式如下：<strong>（已被弃用，因为后续要将音乐播放器放置在中间，所以菜单栏依旧让其靠右）</strong></p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.menus_items</span></span><br><span class="line">    <span class="attribute">display</span>: inline</span><br><span class="line">+    <span class="attribute">position</span>: absolute</span><br><span class="line">+    <span class="attribute">width</span>: fit-content</span><br><span class="line">+    <span class="attribute">left</span>: <span class="number">50%</span></span><br><span class="line">+    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>)</span><br></pre></td></tr></table></figure><h3 id="菜单栏的选项"><a href="#菜单栏的选项" class="headerlink" title="菜单栏的选项"></a>菜单栏的选项</h3><p>&emsp;&emsp;这一部分在主题的配置文件 <code>_config.butterfly.yml</code> 中修改即可。通过查看源码发现，butterfly 仅支持最多二级菜单，并没有嵌套多层菜单功能。目前自己用到的只有主页、学习资料以及常用网站。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">主页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">学习资料:</span> <span class="string">/categories</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-book</span></span><br><span class="line">  <span class="string">常用网站:</span> <span class="string">/link</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-globe</span></span><br><span class="line">  <span class="comment"># 其他||fas fa-list:</span></span><br><span class="line">  <span class="comment">#   Music: /music/ || fas</span></span><br><span class="line">  <span class="comment">#   Movie: /movies/ || fas fa-video</span></span><br></pre></td></tr></table></figure><h3 id="细节优化"><a href="#细节优化" class="headerlink" title="细节优化"></a>细节优化</h3><p>&emsp;&emsp;对于本地搜索，我发现每次点开搜索弹出搜索框的时候，背景图片都会有些许的缩放。经过分析后发现，为了达到更好的体验效果，在弹出搜索框的时候，butterfly 会使主页的 <code>body: overflow</code> 的属性变为 <code>hidden</code>，这样主页面就不会有滚动效果了，达到了模态对话框的效果。但滚动条消失了，<code>body</code> 元素的宽度就会变大，可能会导致原先的页面布局发生一定的改变。而 butterfly 考虑到了这一点，因此在 <code>source/js/utils.js</code> 中创建了如下的函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">overflowPaddingR</span>: &#123;</span><br><span class="line"><span class="attr">add</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> paddingRight = <span class="variable language_">window</span>.<span class="property">innerWidth</span> - <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (paddingRight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">`<span class="subst">$&#123;paddingRight&#125;</span>px`</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> menuElement = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#page-header.nav-fixed #menus&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (menuElement) &#123;</span><br><span class="line">        menuElement.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">`<span class="subst">$&#123;paddingRight&#125;</span>px`</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">remove</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> menuElement = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#page-header.nav-fixed #menus&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (menuElement) &#123;</span><br><span class="line">    menuElement.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;原理就是给 <code>body</code> 添加一个内边距即 <code>paddingRight</code> 抵消变化。但是这个函数只是考虑了例如 <code>card_widget</code> 这些，我发现它们确实在滚动条消失后是不会有 <code>x</code> 方向平移变化的。但背景图就不是这样的。找到主题下的 <code>source/css/_global/index.styl</code> 文件，找到 <code>#web_bg</code> 即背景图片的样式，做如下修改，原理即将背景图片的大小从 <code>100%</code> 改为 <code>100vw</code>，因为背景图片的父元素即 <code>body</code> 是不包含滚动条的。而改为 <code>100vw</code> 则是整个视口的大小，会包含滚动条的大小。这样，即使滚动条消失了，图片的大小依旧是原来的数值，不会发生变化。</p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background&#x27;</span>)</span><br><span class="line"><span class="selector-id">#web_bg</span></span><br><span class="line">    <span class="attribute">position</span>: fixed</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">999</span></span><br><span class="line"></span><br><span class="line">-    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">-    <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">+    <span class="attribute">width</span>: <span class="number">100vw</span></span><br><span class="line">+    <span class="attribute">height</span>: <span class="number">100vh</span></span><br><span class="line">    <span class="attribute">background-attachment</span>: local</span><br><span class="line">    <span class="attribute">background-position</span>: center</span><br><span class="line">    <span class="attribute">background-size</span>: cover</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat</span><br></pre></td></tr></table></figure><h2 id="音乐播放器引入"><a href="#音乐播放器引入" class="headerlink" title="音乐播放器引入"></a>音乐播放器引入</h2><p>&emsp;&emsp;butterfly 有自己的音乐播放插件 <code>Aplayer</code>，但我不是特别喜欢，而且也用不太懂，因此干脆自己写一个吧，又不是没有那个石粒！</p><h3 id="html-pug-部分"><a href="#html-pug-部分" class="headerlink" title="html (.pug) 部分"></a>html (.pug) 部分</h3><p>&emsp;&emsp;首先是 html 元素引入，在 <code>layout/includes/nav.pug</code> 中 <code>blog-info</code> 后，<code>menu</code> 前插入以下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">nav#nav</span><br><span class="line">    span#blog-info</span><br><span class="line">        a.nav-site-title(href=url_for(&#x27;/&#x27;))</span><br><span class="line">        if theme.nav.logo</span><br><span class="line">            img.site-icon(src=url_for(theme.nav.logo) alt=&#x27;Logo&#x27;)</span><br><span class="line">        if theme.nav.display_title</span><br><span class="line">            span.site-name=config.title</span><br><span class="line">        if is_post()</span><br><span class="line">        a.nav-page-title(href=url_for(&#x27;/&#x27;))</span><br><span class="line">            span.site-name=(page.title || config.title)</span><br><span class="line">    </span><br><span class="line">    // 从这里开始添加</span><br><span class="line">    //- music</span><br><span class="line">    #music-bar</span><br><span class="line">        #music-cover-container</span><br><span class="line">        #music-cover</span><br><span class="line"></span><br><span class="line">        #music-button-container</span><br><span class="line">        #music-button-container-top</span><br><span class="line">            span#music-prev.music-icon.iconfont.icon-shangyishou</span><br><span class="line">            span#music-playOrPause.music-icon.iconfont.icon-bofang</span><br><span class="line">            span#music-next.music-icon.iconfont.icon-xiayishou</span><br><span class="line">            span#music-mode.music-icon.iconfont.icon-liebiaoxunhuan</span><br><span class="line"></span><br><span class="line">        #music-button-container-bottom</span><br><span class="line">            div#music-progressBar</span><br><span class="line">            span#music-currentProgress</span><br><span class="line">            span#music-dot</span><br><span class="line">            span#music-progressText= &quot;00:00 / 00:00&quot;</span><br><span class="line"></span><br><span class="line">        #music-name-container</span><br><span class="line">        span#music-name</span><br><span class="line"></span><br><span class="line">        #music-lyric-container</span><br><span class="line">        span#music-lyric</span><br><span class="line">        </span><br><span class="line">    #menus</span><br><span class="line">        #toggle-menu</span><br><span class="line">        span.site-page</span><br><span class="line">        i.fas.fa-bars.fa-fw</span><br></pre></td></tr></table></figure><h3 id="css-styl-部分"><a href="#css-styl-部分" class="headerlink" title="css (.styl) 部分"></a>css (.styl) 部分</h3><p>&emsp;&emsp;这一部分就比较长了，也是花费时间最长的部分之一，主要对 CSS 不常用忘记了好多。找到 <code>css/_layout/head.styl</code>，在最后添加如下代码（复制粘贴使用时注意缩进！！）：</p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// music bar</span></span><br><span class="line"><span class="selector-id">#music-bar</span></span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">2</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.6</span>)</span><br><span class="line">  <span class="attribute">overflow</span>: hidden</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">48px</span></span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line">  </span><br><span class="line">  +<span class="built_in">maxWidth1024</span>()</span><br><span class="line">    <span class="attribute">display</span>: none</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#music-cover-container</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">52px</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">display</span>: inline-flex</span><br><span class="line">    <span class="attribute">vertical-align</span>: top</span><br><span class="line">    <span class="attribute">align-items</span>: center</span><br><span class="line">    </span><br><span class="line">    <span class="selector-id">#music-cover</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">44px</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">44px</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">0</span> <span class="number">4px</span></span><br><span class="line">      <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;/img/云烟成雨-cover.webp&quot;</span>)</span><br><span class="line">      <span class="attribute">background-size</span>: contain</span><br><span class="line">      <span class="attribute">background-repeat</span>: no-repeat</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#music-button-container</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="attribute">vertical-align</span>: top</span><br><span class="line">    <span class="comment">// background-color: rgb(3, 84, 3)</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#music-button-container-top</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">26px</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">      <span class="comment">// background-color: rgb(114, 6, 107)</span></span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">      <span class="attribute">align-content</span>: center</span><br><span class="line">      <span class="attribute">justify-content</span>: center</span><br><span class="line">      <span class="selector-class">.music-icon</span></span><br><span class="line">        <span class="comment">// background-color: rgb(174, 167, 167)</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">24px</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">24px</span></span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">24px</span></span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">24px</span></span><br><span class="line">        <span class="attribute">margin</span>: auto <span class="number">2px</span></span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">          <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">31</span>, <span class="number">179</span>, <span class="number">161</span>, <span class="number">1</span>)</span><br><span class="line">          <span class="attribute">cursor</span>: pointer</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#music-button-container-bottom</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">22px</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">      <span class="comment">// background-color: rgb(82, 76, 2)</span></span><br><span class="line">      <span class="attribute">position</span>: relative</span><br><span class="line"></span><br><span class="line">      <span class="selector-id">#music-progressBar</span></span><br><span class="line">        <span class="attribute">position</span>: absolute</span><br><span class="line">        <span class="attribute">bottom</span>: <span class="number">3px</span></span><br><span class="line">        <span class="attribute">left</span>: <span class="number">50%</span></span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>)</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">4px</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">110px</span></span><br><span class="line">        <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">35</span>, <span class="number">35</span>, <span class="number">35</span>, <span class="number">0.8</span>)</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">2.5px</span></span><br><span class="line">        <span class="comment">// overflow: hidden</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-id">#music-currentProgress</span></span><br><span class="line">          <span class="attribute">display</span>: block</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">2px</span></span><br><span class="line">          <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">          <span class="comment">// background-color: rgb(255, 0, 0)</span></span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">2px</span></span><br><span class="line">          <span class="attribute">transition</span>: <span class="number">0.3s</span> ease</span><br><span class="line"></span><br><span class="line">        <span class="selector-id">#music-dot</span></span><br><span class="line">          <span class="attribute">display</span>: block</span><br><span class="line">          <span class="attribute">position</span>: absolute</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">6px</span></span><br><span class="line">          <span class="attribute">height</span>: <span class="number">6px</span></span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">3px</span></span><br><span class="line">          <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">234</span>, <span class="number">151</span>, <span class="number">8</span>)</span><br><span class="line">          <span class="attribute">bottom</span>: -<span class="number">1px</span></span><br><span class="line">          <span class="attribute">left</span>: -<span class="number">3px</span></span><br><span class="line">          <span class="attribute">z-index</span>: <span class="number">999</span></span><br><span class="line">          <span class="attribute">transition</span>: <span class="number">0.3s</span> ease</span><br><span class="line"></span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">          <span class="attribute">cursor</span>: pointer</span><br><span class="line">          <span class="selector-id">#music-dot</span></span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">0.5</span>); <span class="comment">/* 添加阴影 */</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-id">#music-progressText</span></span><br><span class="line">        <span class="attribute">position</span>: absolute</span><br><span class="line">        <span class="attribute">top</span>: -<span class="number">1px</span></span><br><span class="line">        <span class="attribute">right</span>: <span class="number">4px</span></span><br><span class="line">        <span class="attribute">display</span>: block</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">80px</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">16px</span></span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">16px</span></span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="attribute">text-align</span>: right</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#music-name-container</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="comment">// background-color: rgb(127, 0, 0)</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">48px</span></span><br><span class="line">    <span class="attribute">white-space</span>: nowrap</span><br><span class="line">    <span class="attribute">text-align</span>: center</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">2px</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">70%</span></span><br><span class="line">      <span class="attribute">top</span>: <span class="number">50%</span></span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>)</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">139</span>, <span class="number">139</span>, <span class="number">139</span>, <span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#music-name</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">24px</span></span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">48px</span></span><br><span class="line">      <span class="attribute">font</span>: <span class="number">20px</span> <span class="string">&quot;wawati&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#music-lyric-container</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="comment">// background-color: rgb(153, 210, 168)</span></span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">48px</span></span><br><span class="line">    <span class="attribute">text-align</span>: center</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">2px</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">70%</span></span><br><span class="line">      <span class="attribute">top</span>: <span class="number">50%</span></span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>)</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">139</span>, <span class="number">139</span>, <span class="number">139</span>, <span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#music-lyric</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">48px</span></span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">48px</span></span><br><span class="line">      <span class="attribute">font</span>: <span class="number">20px</span> <span class="string">&quot;wawati&quot;</span></span><br></pre></td></tr></table></figure><h3 id="js-部分"><a href="#js-部分" class="headerlink" title="js 部分"></a>js 部分</h3><p>&emsp;&emsp;最后就到了 <code>js</code> 代码部分了，这一部分没有原先的文件可供使用，因此自己可以在 hexo 主目录下的 <code>source</code> 中创建一个目录 <code>js</code>，在其中创建一个文件 <code>music.js</code> 以及用于歌词分割的文件 <code>lyricParse.js</code>，由于是单独的文件，此处就不再粘贴出代码了。</p><h3 id="资源文件部分"><a href="#资源文件部分" class="headerlink" title="资源文件部分"></a>资源文件部分</h3><ul><li>音乐封面，路径为 <code>/img/</code></li><li>音乐资源，路径为 <code>/music/</code></li><li>音乐歌词，路径为 <code>/lyrics/</code></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo-butterfly 魔改记录2——鼠标部分</title>
      <link href="/2024/11/19/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%952%E2%80%94%E2%80%94%E9%BC%A0%E6%A0%87%E9%83%A8%E5%88%86/"/>
      <url>/2024/11/19/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%952%E2%80%94%E2%80%94%E9%BC%A0%E6%A0%87%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h2 id="鼠标样式修改"><a href="#鼠标样式修改" class="headerlink" title="鼠标样式修改"></a>鼠标样式修改</h2><p>可以在 <code>source/css/</code> 下新建 <code>cursor.css</code> 文件来修改鼠标的展示样式</p>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo-butterfly 魔改记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo-butterfly 魔改记录1——背景飘落特效</title>
      <link href="/2024/11/13/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%951%E2%80%94%E2%80%94%E8%83%8C%E6%99%AF%E9%A3%98%E8%90%BD%E7%89%B9%E6%95%88/"/>
      <url>/2024/11/13/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%951%E2%80%94%E2%80%94%E8%83%8C%E6%99%AF%E9%A3%98%E8%90%BD%E7%89%B9%E6%95%88/</url>
      
        <content type="html"><![CDATA[<h2 id="樱花-雪花飘落特效"><a href="#樱花-雪花飘落特效" class="headerlink" title="樱花&#x2F;雪花飘落特效"></a>樱花&#x2F;雪花飘落特效</h2><p>&emsp;&emsp;在 <code>sakuraPlus.js</code> 中实现。这是很久之前不知道从哪里得到的一份代码，目前网上也十分容易找到，并且用的人也挺多的。将这份代码放置在 <code>source/js</code> 文件夹中，可以修改其中的 <code>img.src</code> 图片原路径换不同的图片资源，甚至也可以修改 <code>fnx</code> 等这些飘落计算公式适配不同的物体飘落逻辑。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject</span></span><br><span class="line"><span class="comment"># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line"><span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/cursor.css&quot;&gt;</span></span><br><span class="line"><span class="attr">bottom:</span></span><br><span class="line"><span class="string">+</span>    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=/js/sakuraPlus.js&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo-butterfly 魔改记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CMake 的使用</title>
      <link href="/2024/11/12/CMake-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2024/11/12/CMake-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ol><li><p>指定 cmake 的最低版本</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.15</span>)</span><br></pre></td></tr></table></figure></li><li><p>指定项目名称</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># specify the project&#x27;s name</span></span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">test</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>set</code> 命令的使用，例如指定 C++ 的标准、指定文件输出路径等</p><ul><li><p>指定 C++11 的标准</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">11</span>)</span><br></pre></td></tr></table></figure></li><li><p>指定制作的库的输出路径，一般放置在项目根目录的 <code>lib</code> 文件夹中</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(LIBRARY_OUTPUT_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/lib)</span><br></pre></td></tr></table></figure></li><li><p>指定可执行程序的输出路径，一般我们都放置在项目根目录的 <code>bin</code> 文件夹中</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(EXECUTABLE_OUTPUT_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/bin)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>搜索文件</p><ul><li><p>方法 1: <code>file</code> 命令</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">file</span>(GLOB SRC <span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/*.cpp)</span><br></pre></td></tr></table></figure><ul><li>参数 1: <code>GLOB</code> 是 <code>file</code> 命令的一个参数，表示“全局匹配”，用于根据指定的模式查找文件。</li><li>参数 2: 将查找到的文件保存在该变量中。</li><li>参数 3: 匹配模式，示例中为匹配 <code>CMAKE_CURRENT_SOURCE_DIR</code> 宏指定的目录下的所有以 <code>.cpp</code> 结尾的文件。</li></ul></li><li><p>方法 2: 待补充，方法 1 就挺好用</p></li></ul></li><li><p>制作一个库文件</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_library</span>(calculate STATIC <span class="variable">$&#123;SRC&#125;</span>)</span><br></pre></td></tr></table></figure><ul><li>参数 1: 表示生成库的名字，注意这只是省略的写法，真正的库名为 <code>libcalculate.lib</code> 这种。</li><li>参数 2: 表示生成库的类型, <code>STATIC</code> 表示生成静态库，<code>SHARED</code> 表示生成动态库（共享库）。</li><li>参数 3: 表示用于生成库所需要的源文件。</li></ul></li><li><p>打印信息</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">message</span>(<span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>)</span><br></pre></td></tr></table></figure></li><li><p>引用一个库文件：</p><ul><li>首先要包含头文件。因为头文件中有如何使用库文件中的接口，有了头文件才能指导我们里面有什么函数可以使用。</li></ul> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># include head file</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;../include&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>然后应该告知要去哪里搜索我们的库文件，我们要指定一个具体的搜索目录。</li></ul> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># include library</span></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/lib)</span><br></pre></td></tr></table></figure><ul><li>最后，我们便可以链接这个目录中的某个具体库使用了～</li></ul> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">link_libraries</span>(calculate)</span><br></pre></td></tr></table></figure></li><li><p>生成可执行文件</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(test1 <span class="variable">$&#123;SRC&#125;</span>)</span><br></pre></td></tr></table></figure><p> 参数 1: 生成可执行文件的名称。<br> 参数 2: 所需要用到的源文件。</p></li></ol><h2 id="常用的宏"><a href="#常用的宏" class="headerlink" title="常用的宏"></a>常用的宏</h2><table><thead><tr><th>宏名称</th><th>解释</th></tr></thead><tbody><tr><td><code>CMAKE_CURRENT_SOURCE_DIR</code></td><td><strong>当前</strong> <code>CMakeLists.txt</code> 所在的目录</td></tr><tr><td><code>PROJECT_SOURCE_DIR</code></td><td>项目的根目录，注意在多 CMake 嵌套的工程中与 <code>CMAKE_CURRENT_SOURCE_DIR</code> 不一定等价</td></tr><tr><td><code>CMAKE_CXX_STANDARD</code></td><td>CMake 要求的 C++ 最低版本</td></tr><tr><td><code>LIBRARY_OUTPUT_PATH</code></td><td>制作的库的输出（保存）路径</td></tr><tr><td><code>EXECUTABLE_OUTPUT_PATH</code></td><td>生成的二进制可执行程序的输出路径</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/11/12/hello-world/"/>
      <url>/2024/11/12/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
