<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo-butterfly 魔改记录</title>
      <link href="/2024/11/13/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/11/13/Hexo-butterfly-%E9%AD%94%E6%94%B9%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<ul><li><p><strong>樱花&#x2F;雪花飘落特效</strong><br>  在 <code>sakuraPlus.js</code> 中实现。这是很久之前不知道从哪里得到的一份代码，目前网上也十分容易找到，并且用的人也挺多的。将这份代码放置在 <code>source/js</code> 文件夹中，可以修改其中的 <code>img.src</code> 图片原路径换不同的图片资源，甚至也可以修改 <code>fnx</code> 等这些飘落计算公式适配不同的物体飘落逻辑。</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject</span></span><br><span class="line"><span class="comment"># Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line"><span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/cursor.css&quot;&gt;</span></span><br><span class="line"><span class="attr">bottom:</span></span><br><span class="line"><span class="string">+</span>    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=/js/sakuraPlus.js&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>鼠标样式修改</strong><br>  可以在 <code>source/css/</code> 下新建 <code>cursor.css</code> 文件来修改鼠标的展示样式</p></li><li><p><strong>导航栏 <code>nav</code> 修改</strong></p><p>  找到 <code>layout/includes/nav.pug</code>，让搜索按钮位于最后面，只需要将 <code>theme.menu</code> 和 <code>theme.search</code> 两段代码交换位置即可。<br>  （由于该插件不支持 <code>pug</code> 格式高亮，此处代码语言用 <code>js</code> 来代替）</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#menus</span><br><span class="line"><span class="keyword">if</span> theme.<span class="property">menu</span></span><br><span class="line">  != <span class="title function_">partial</span>(<span class="string">&#x27;includes/header/menu_item&#x27;</span>, &#123;&#125;, &#123;<span class="attr">cache</span>: <span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line">  #toggle-menu</span><br><span class="line">    span.<span class="property">site</span>-page</span><br><span class="line">    i.<span class="property">fas</span>.<span class="property">fa</span>-bars.<span class="property">fa</span>-fw</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> theme.<span class="property">search</span>.<span class="property">use</span></span><br><span class="line">  #search-button</span><br><span class="line">    span.<span class="property">site</span>-page.<span class="property">social</span>-icon.<span class="property">search</span></span><br><span class="line">      i.<span class="property">fas</span>.<span class="property">fa</span>-search.<span class="property">fa</span>-fw</span><br><span class="line">      span= <span class="string">&#x27; &#x27;</span> + <span class="title function_">_p</span>(<span class="string">&#x27;search.title&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><p>对于本地搜索，我发现每次点开搜索弹出搜索框的时候，背景图片都会有些许的缩放。经过分析后发现，为了达到更好的体验效果，在弹出搜索框的时候，butterfly 会使主页的 <code>body: overflow</code> 的属性变为 <code>hidden</code>，这样就不会有滚动条了。但滚动条消失了，<code>body</code> 元素的宽度就会变大，可能会导致原先的页面布局发生一定的改变。而 butterfly 考虑到了这一点，因此在 <code>source/js/utils.js</code> 中创建了如下的函数：</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">overflowPaddingR</span>: &#123;</span><br><span class="line"><span class="attr">add</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> paddingRight = <span class="variable language_">window</span>.<span class="property">innerWidth</span> - <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (paddingRight &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">`<span class="subst">$&#123;paddingRight&#125;</span>px`</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> menuElement = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#page-header.nav-fixed #menus&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (menuElement) &#123;</span><br><span class="line">        menuElement.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">`<span class="subst">$&#123;paddingRight&#125;</span>px`</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">remove</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> menuElement = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#page-header.nav-fixed #menus&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (menuElement) &#123;</span><br><span class="line">    menuElement.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ul><p>  原理就是给 <code>body</code> 添加一个内边距即 <code>paddingRight</code> 抵消变化。但是这个函数只是考虑了例如 <code>card_widget</code> 这些，我发现它们确实在滚动条消失后是不会有 <code>x</code> 方向平移变化的。但背景图就不是这样的。找到主题下的 <code>source/css/_global/index.styl</code> 文件，找到 <code>#web_bg</code> 即背景图片的样式，做如下修改，原理即将背景图片的大小从 <code>100%</code> 改为 <code>100vw</code>，因为背景图片的父元素即 <code>body</code> 是不包含滚动条的。而改为 <code>100vw</code> 则是整个视口的大小，会包含滚动条的大小。这样，即使滚动条消失了，图片的大小依旧是原来的数值，不会发生变化。</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    if hexo-config(&#x27;<span class="attribute">background</span>&#x27;)</span><br><span class="line"><span class="selector-id">#web_bg</span></span><br><span class="line">    <span class="attribute">position</span>: fixed</span><br><span class="line">    z-index: -<span class="number">999</span></span><br><span class="line"></span><br><span class="line">-    width: <span class="number">100%</span></span><br><span class="line">-    height: <span class="number">100%</span></span><br><span class="line">+    width: <span class="number">100vw</span></span><br><span class="line">+    height: <span class="number">100vh</span></span><br><span class="line">    background-attachment: local</span><br><span class="line">    background-position: center</span><br><span class="line">    background-size: cover</span><br><span class="line">    background-repeat: no-repeat</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CMake 的使用</title>
      <link href="/2024/11/12/CMake-%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2024/11/12/CMake-%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ol><li><p>指定 cmake 的最低版本</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.15</span>)</span><br></pre></td></tr></table></figure></li><li><p>指定项目名称</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># specify the project&#x27;s name</span></span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">test</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>set</code> 命令的使用，例如指定 C++ 的标准、指定文件输出路径等</p><ul><li><p>指定 C++11 的标准</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">11</span>)</span><br></pre></td></tr></table></figure></li><li><p>指定制作的库的输出路径，一般放置在项目根目录的 <code>lib</code> 文件夹中</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(LIBRARY_OUTPUT_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/lib)</span><br></pre></td></tr></table></figure></li><li><p>指定可执行程序的输出路径，一般我们都放置在项目根目录的 <code>bin</code> 文件夹中</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(EXECUTABLE_OUTPUT_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/bin)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>搜索文件</p><ul><li><p>方法 1: <code>file</code> 命令</p>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">file</span>(GLOB SRC <span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/*.cpp)</span><br></pre></td></tr></table></figure><ul><li>参数 1: <code>GLOB</code> 是 <code>file</code> 命令的一个参数，表示“全局匹配”，用于根据指定的模式查找文件。</li><li>参数 2: 将查找到的文件保存在该变量中。</li><li>参数 3: 匹配模式，示例中为匹配 <code>CMAKE_CURRENT_SOURCE_DIR</code> 宏指定的目录下的所有以 <code>.cpp</code> 结尾的文件。</li></ul></li><li><p>方法 2: 待补充，方法 1 就挺好用</p></li></ul></li><li><p>制作一个库文件</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_library</span>(calculate STATIC <span class="variable">$&#123;SRC&#125;</span>)</span><br></pre></td></tr></table></figure><ul><li>参数 1: 表示生成库的名字，注意这只是省略的写法，真正的库名为 <code>libcalculate.lib</code> 这种。</li><li>参数 2: 表示生成库的类型,<code>STATIC</code> 表示生成静态库，<code>SHARED</code> 表示生成动态库（共享库）。</li><li>参数 3: 表示用于生成库所需要的源文件。</li></ul></li><li><p>打印信息</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">message</span>(<span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>)</span><br></pre></td></tr></table></figure></li><li><p>引用一个库文件：</p><ul><li>首先要包含头文件。因为头文件中有如何使用库文件中的接口，有了头文件才能指导我们里面有什么函数可以使用。</li></ul> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># include head file</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;../include&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>然后应该告知要去哪里搜索我们的库文件，我们要指定一个具体的搜索目录。</li></ul> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># include library</span></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/lib)</span><br></pre></td></tr></table></figure><ul><li>最后，我们便可以链接这个目录中的某个具体库使用了～</li></ul> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">link_libraries</span>(calculate)</span><br></pre></td></tr></table></figure></li><li><p>生成可执行文件</p> <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(test1 <span class="variable">$&#123;SRC&#125;</span>)</span><br></pre></td></tr></table></figure><p> 参数 1: 生成可执行文件的名称。<br> 参数 2: 所需要用到的源文件。</p></li></ol><h2 id="常用的宏"><a href="#常用的宏" class="headerlink" title="常用的宏"></a>常用的宏</h2><table><thead><tr><th>宏名称</th><th>解释</th></tr></thead><tbody><tr><td><code>CMAKE_CURRENT_SOURCE_DIR</code></td><td><strong>当前</strong> <code>CMakeLists.txt</code> 所在的目录</td></tr><tr><td><code>PROJECT_SOURCE_DIR</code></td><td>项目的根目录，注意在多 CMake 嵌套的工程中与 <code>CMAKE_CURRENT_SOURCE_DIR</code> 不一定等价</td></tr><tr><td><code>CMAKE_CXX_STANDARD</code></td><td>CMake 要求的 C++ 最低版本</td></tr><tr><td><code>LIBRARY_OUTPUT_PATH</code></td><td>制作的库的输出（保存）路径</td></tr><tr><td><code>EXECUTABLE_OUTPUT_PATH</code></td><td>生成的二进制可执行程序的输出路径</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/11/12/hello-world/"/>
      <url>/2024/11/12/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
